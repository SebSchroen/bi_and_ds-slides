---
title: "Business Intelligence & Data Science"
subtitle: "Vorlesung 2"
---


## Der Plan für heute...
### Vorlesung 2
  * Datenbereitstellung:
    * Data Warehouse
    * Data Mart
    * Architekturkonzepte
  * Verknüpfung eines einfachen Data Marts mit Superset


#  Datenbereitstellung

## Überblick zum BIA Gesamteinsatz
### Datenbereitstellung
![BIA Gesamtansatz. Eigene Darstellung in Anlehnung an @baars_business_2021.](img/bia_ordnungsrahmen.drawio.png){width="700" height="500"}

## Data Warehouse
### Begriff


::: {.callout-tip title="Definition"}
 Ein Data Warehouse (DWH) ist ein Datenhaltungssystem dispositiver Daten, das von den operativen Datenbeständen getrennt, themenorientiert aufbereitet und logisch zentralisiert ist. Ein DWH integriert unternehmensweit Datenbestände aus verschiedenen operativen internen Systemen (z.B. Kernbanksystemen und Enterprise-Ressource-Planning-Systemen) sowie externen Systemen (z.B. Börseninformationssystemen und Systeme für externe Ratings) und dient idealtypisch als unternehmensweite, einheitliche und konsistente Datenbasis für alle Arten von Systemen der Entscheidungsunterstützung [siehe @kemper_data_2023].
::: 

## Data Warehouse
### Eigenschaften
::: {style="font-size: 0.95em"}
1. Themenorientierung: 
    * Dispositive Daten des DWH sind explizit an den Interessenslagen der Entscheidenden ausgerichtet
    * Die operativen bzw. externen Daten werden vor der Speicherung im DWH aufbereitet, harmonisiert und ggf. voraggregiert
    * Themen sind Produkthierarchien, vordefinierte Zeiträume wie Quartale oder betriebswirtschaftliche Kennzahlen wie DB1

2. Integration: 
    * Daten aus den unterschiedlichen operativen und externen Systemen werden im DWH integriert
    * Zusammenführung zu einer inhaltlich widerspruchfreien Datenquelle, sogenannter “single point of truth”
:::    

## Data Warehouse
### Eigenschaften


3. Zeitraumbezug:
    * Operative Systeme sind transaktionsorientiert und bilden einen bestimmten Zeitpunkt ab
    * Daten im DWH werden üblicherweise auf Zeiträume aggregiert, bspw. ein Monat oder ein Jahr

4. Nicht-Volatilität:
    * Daten im DWH werden dauerhaft abgelegt und für die Analyse zur Verfügung gestellt
    * DWH-Daten werden somit in der Regel nicht mehr geändert, überschrieben oder entfernt


## Data Warehouse 
### Komponenten des Data Warehouse

:::: {.columns}
::: {.column width="50%"}
**Data Mart**

* Separater Datenpool für einen bestimmten Anwendungsbereich spezifischer Abteilungen
* Nur ein Ausschnitt aus dem gesamten Datenpool, häufig aus Performance-Erwägungen
* Häufig mit Reporting- und OLAP assoziiert, zunehmend aber auch für Analysen
:::

::: {.column width="50%"}
**Core Data Warehouse**

* Rückrat der meisten Architekturkonzepte und oft als Basisdatenbank bezeichnet
* Befüllung über ETL-Prozesse aus operativen Quellsystemen
* Meist auf relationalen Datenhaltungssystemen basierend mit großen Datenvolumina (TB Bereich)
* Applikationsneutral modelliert
:::

::::



## Data Warehouse
### Funktionen des CDWH

* Das Core Data Warehouse (CDWH) erfüllt folgende Funktionen:
1. Sammel- und Integrationsfunktion: 
    * Aufnahme aller wichtigen Daten für die Analyse in Form eines zentralen Datenlagers
2. Distributionsfunktion: 
    * Versorgung aller nachgeschalteten Data Marts mit Daten
3. Qualitätssicherungsfunktion: 
    * Datentransformation sichert die syntaktische und semantische Stimmigkeit der dispositiven Datenbasis

## Data Warehouse 
### Data Mart vs. CDWH

::: {style="font-size: 0.70em"}
|  | Data Mart | Core Data Warehouse |
|---|---|---|
| Ziel | Entscheidungsunterstützung für ausgewählte Bereiche, spezifisch auf Analyseanforderungen zugeschnitten | Entscheidungsunterstützung für alle Bereiche in einem Unternehmen |
| Ausrichtung | Bereichsspezifisch oder Abteilungsbezogen | Zentral und unternehmensweit |
| Granularität | Höhere Aggregationen | Feinste verfügbare Granularität |
| Verfügbarkeit für Endanwendende | In der Regel möglich | Häufig nicht erlaubt da zentral durch IT betrieben und als Quellsystem für Marts genutzt |
| Flexibilität der Analysen | Tendenziell gering und auf Anwendungsbereich beschränkt | Sehr flexibel |
| Volumina | Gering bis moderat | Moderat bis umfangreich |

: Charakteristika von Data Mart und Core Data Warehouse im Vergleich. In Anlehnung an  @baars_business_2021 {tbl-colwidths="[20,40,40]"}
:::

## DWH Architekturen
### Unabhängige Data Marts

:::: {.columns}
::: {.column width="55%"}
::: {.fragment .fade-in}
* Auch Stove-Pipe Ansatz
* Bedienen sich direkt aus den operativen und externen Systemen
* Bereiten die enthaltenen Daten für relevante Anwendungsfelder auf
* Daten werden isoliert bezogen und fließen direkt in Datensilos auf Basis bereichsspezifischer Fragestellungen
* Verschiedene Marts können unterschiedliche externe Datenquellen zusammenführen
:::
:::
::: {.column width="45%"}
<!-- ![Unabhängige Data Marts. Eigene Darstellung in Anlehnung an @gluchowski_architekturkonzepte_2016](img/plot_marts.png){width="100%"} -->


::: {style="font-size: 0.70em"}
```{r, stove_pipe, echo = FALSE}
#| fig.cap: Unabhängige Data Marts. Eigene Darstellung in Anlehnung an @gluchowski_architekturkonzepte_2016

library(DiagrammeR)

grViz("digraph {

graph [layout = dot, rankdir = LR]


node [shape = box3d, style = filled, fillcolor = Linen, fontsize = 8]

sap [label = 'SAP', shape = cylinder, fillcolor = Beige]
mes [label = 'MES', shape = cylinder, fillcolor = Beige]
pdm [label = 'PDM', shape = cylinder, fillcolor = Beige]

controlling [label =  'Controlling', width = 1]
sales [label = 'Sales', width = 1]

# edge definitions with the node IDs
{pdm sap}  -> {sales }
{sap mes} -> controlling
}", height = 450, width = 400)


```
:::
:::
::::


## DWH Architekturen
### Unabhängige Data Marts

:::: {.columns}
::: {.column width="50%"}
Vorteile:

* Schnelle und bereichsspezifische Informationsbereitstellung
* Sinnvoll bei fehlender Governance Strategie
* Erfüllung maßgeschneideter bereichsspezifischer Fragestellungen


:::
::: {.column width="50%"}
Nachteile:

* Häufig historisch gewachsene Strukturen und damit geringe Governance
* Mehrfache Aufbereitung der Quelldaten
* Gefahr von Inkonsistenzen bei der Kennzahlenberechnung zwischen Marts
* Mangelnde Möglichkeit bereichsübergreifender Analysen

:::

::::

## DWH Architekturen
### Abgestimmte Data Marts


:::: {.columns}
::: {.column width="50%"}
::: {.fragment .fade-in}
* Konzeptionell abgestimmte Datenmodelle um  die Integrität des Datenmaterials zu gewährleisten
* Das abgestimmte Datenmodell dient der syntaktischen und semantischen Vereinheitlichung
* Inhaltliche und zeitliche Übereinstimmung der Datenextraktionen ist entscheidend für die Konsistenz der Data Marts
:::
:::
::: {.column width="50%"}

::: {style="font-size: 0.70em"}
```{r, marts_abgestimmt, echo = FALSE}
#| fig.cap: Abhängige Data Marts. Eigene Darstellung in Anlehnung an @gluchowski_architekturkonzepte_2016



grViz("digraph {

graph [layout = dot, rankdir = LR]


node [shape = box3d, style = filled, fillcolor = Linen, fontsize = 8]


sap [label = 'SAP', shape = cylinder, fillcolor = Beige]
mes [label = 'MES', shape = cylinder, fillcolor = Beige]
pdm [label = 'PDM', shape = cylinder, fillcolor = Beige]

subgraph cluster_EBD {
label = 'Abgestimmtes Datenmodell'
labelloc = 'b'
controlling [label =  'Controlling', width = 1]
sales [label = 'Sales', width = 1]
procurement [label= 'Procurement', width = 1]
}

# edge definitions with the node IDs
{mes pdm}  -> {sales procurement}
{sap mes} -> controlling
}", height = 450, width = 400)


```
:::
:::
::::


## DWH Architekturen
### Abgestimmte Data Marts

:::: {.columns}
::: {.column width="50%"}
Vorteile:

* Integrität des Datenmodells wird gewährleistet
* Möglichkeit bereichsübergreifender Analysen bei hoher Flexibilität innerhalb der Bereiche
* Entscheidungsunterstützung für alle Bereiche in einem Unternehmen


:::
::: {.column width="50%"}
Nachteile:

* Durch hohen Bereichsbezug oft unterschiedliche Granularität oder Aufbereitung, damit nur bedingte Integration zwischen Marts
* Möglicherweise höherer Abstimmungsbedarf zwischen Abteilungen bei der Kennzahldefinition
* Informationsverlust bei übergreifenden Analysen

:::

::::

## DWH Architekturen
### Core Data Warehouse

:::: {.columns}
::: {.column width="55%"}
::: {.fragment .fade-in}
* Das CDWH wird direkt aus den operativen Quellsystemen befüllt und basiert auf einer relationalen Datenbank
* Dieser Ansatz wird oft als Monolith bezeichnet
* Die Daten decken unterschiedliche Auswertungszwecke ab und sind weniger anwendungsbezogen als Datensilos
:::
:::
::: {.column width="45%"}

::: {style="font-size: 0.70em"}

```{r}
#| fig.cap: Core Data Warehouse. Eigene Darstellung in Anlehnung an @gluchowski_architekturkonzepte_2016

grViz("digraph {

graph [layout = dot, rankdir = BT]


node [shape = box3d, style = filled, fillcolor = Linen, fontsize = 8]


sap [label = 'SAP', shape = cylinder, fillcolor = Beige]
mes [label = 'MES', shape = cylinder, fillcolor = Beige]
pdm [label = 'PDM', shape = cylinder, fillcolor = Beige]

cdwh [label = 'Core Data Warehouse', shape = cylinder, width = 2]

# edge definitions with the node IDs
{sap mes pdm}  -> cdwh

}", height = 450, width = 400)



```

:::
:::
::::


## DWH Architekturen
### Core Data Warehouse

:::: {.columns}
::: {.column width="50%"}
Vorteile:

* Hoher Grad an Mehrfachverwendbarkeit der Daten
* Hoher Detailgrad möglich
* Bei kleineren Anwendungsfällen oft ausreichend

:::
::: {.column width="50%"}
Nachteile:

* Berechtigungsmanagement und Performance stoßen bei komplexen Anwendungsfällen schnell an Grenzen
* Bei größeren Einheiten mit eigenen Geschäftsprozessen und stark abweichenden Hierarchiestrukturen sehr komplex, hier bietet sich der Einsatz mehrerer CDWH an

:::
::::

## DWH Architekturen
### Core Data Warehouse mit abhängigen Data Marts

:::: {.columns}
::: {.column width="55%"}
::: {.fragment .fade-in}
* Auch Hub-and-Spoke Ansatz genannt
* CDWH wird nicht direkt für Analysen herangezogen, sondern dient der Befüllung von Marts
* Marts sind dann anwendungsbezogen, weisen aber ein einheitliches Datenmodell auf
* CDWH als Hub erfüllt  Aufgaben der Integration, Qualitätssicherung und Datenverteilung an die Marts
:::
:::
::: {.column width="45%"}

::: {style="font-size: 0.70em"}

```{r}
#| fig.cap: Core Data Warehouse mit abhängigen Data Marts. Eigene Darstellung in Anlehnung an @gluchowski_architekturkonzepte_2016




grViz("digraph {

graph [layout = dot, rankdir = BT]


node [shape = box3d, style = filled, fillcolor = Linen, fontsize = 8]


sap [label = 'SAP', shape = cylinder, fillcolor = Beige]
mes [label = 'MES', shape = cylinder, fillcolor = Beige]
pdm [label = 'PDM', shape = cylinder, fillcolor = Beige]

cdwh [label = 'Core Data Warehouse', shape = cylinder, width = 2]

controlling [label =  'Controlling', width = 1]
sales [label = 'Sales', width = 1]
procurement [label= 'Procurement', width = 1]


# edge definitions with the node IDs
{sap mes pdm}  -> cdwh -> {controlling sales procurement}

}", height = 450, width = 400)



```

:::
:::
::::


## DWH Architekturen
### Core Data Warehouse

:::: {.columns}
::: {.column width="50%"}
Vorteile:

* Einmaliger und einheitlicher Transformationsprozess ohne redundante Transformationslogik
* Geringere Anzahl an Extraktionsprozessen
* Reduzierte Anzahl direkter Schnittstellen zwischen Marts und operativen Daten

:::
::: {.column width="50%"}
Nachteile:

* Nach wie vor eher traditionelle BI-Sicht

:::
::::

## DWH Architekturen
### Architekturen-Mix

::: {style="font-size: 0.70em"}

```{r}
#| fig.cap: Architekturen-Mix. Eigene Darstellung in Anlehnung an @gluchowski_architekturkonzepte_2016





grViz("digraph {

graph [layout = dot, rankdir = BT]


node [shape = box3d, style = filled, fillcolor = Linen, fontsize = 8]


sap [label = 'SAP', shape = cylinder, fillcolor = Beige]
mes [label = 'MES', shape = cylinder, fillcolor = Beige]
pdm [label = 'PDM', shape = cylinder, fillcolor = Beige]
omp [label = 'Externe Daten', shape = cylinder, fillcolor = Beige]

cdwh [label = 'Core Data Warehouse', shape = cylinder, width = 2]

controlling [label =  'Controlling', width = 1]
sales [label = 'Sales', width = 1]
procurement [label= 'Procurement', width = 1]
da [label = 'Data & \n Analytics', width = 1, height = 0.7]

# edge definitions with the node IDs
{sap mes pdm}  -> cdwh -> {controlling sales procurement}
{sap omp} -> da
}")



```

:::
## Quellen    
